language: java
env:
  global:
    - GH_REF: github.com/waic/wcag20.git
    - secure: I1NEUie44Ib0gMDpx/BBfihs9jtA9aGtF/cUEhCRCP9R0p1zcMWZH9TG9bGSSumXQIKsC2PjqnSFW37gHroGtGYFW96/JPaxsTIEWQQA8fqC1C1oVZZeGcAnMe943H/U4J7Dcyq1JNqyf78Wc70QEbvY/b2q5zrlj/bOQygyYH8=
    
install:
  - curl -L http://sourceforge.net/projects/saxon/files/Saxon-HE/9.5/SaxonHE9-5-1-4J.zip/download > SaxonHE9.zip
  - unzip SaxonHE9.zip
  
git:
  depth: 3
  
branches:
  only:
    wg4_translation

before_script:
  - git config --global user.email "bakera@star.email.ne.jp"
  - git config --global user.name "MINAZUKI, Bakera"
  
script:
  - ant -f wcag20/build.xml -lib saxon9he.jar gh-pages
  
after_success:
  - cd ../..
  - mkdir gh-pages
  - cd gh-pages
  - git clone --depth=1 --branch=gh-pages https://${GH_REF}
  - cd wcag20
  - cp -r ../../../Generated/* .
  - git add .
  - git commit -m "Generated by TRAVIS-CI"
  - git push "https://${GH_TOKEN}@${GH_REF}" gh-pages

